<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Configure Site-to-Site VPN between FortiGate and Meraki | Kirk Miller</title><meta name=keywords content="Cisco,Fortinet,FortiGate,Meraki,VPN,S2S,site-to-site"><meta name=description content="Step-by-step instructions using the WebUI"><meta name=author content="Kirk"><link rel=canonical href=https://blog.kmil.us/posts/fortigate-meraki-vpn-setup/><link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://blog.kmil.us/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.kmil.us/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.kmil.us/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.kmil.us/apple-touch-icon.png><link rel=mask-icon href=https://blog.kmil.us/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.104.3"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-4MK7WX28GY"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4MK7WX28GY",{anonymize_ip:!1})}</script><meta property="og:title" content="Configure Site-to-Site VPN between FortiGate and Meraki"><meta property="og:description" content="Step-by-step instructions using the WebUI"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.kmil.us/posts/fortigate-meraki-vpn-setup/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-08-10T20:23:44-05:00"><meta property="article:modified_time" content="2022-08-10T20:23:44-05:00"><meta property="og:site_name" content="ExampleSite"><meta name=twitter:card content="summary"><meta name=twitter:title content="Configure Site-to-Site VPN between FortiGate and Meraki"><meta name=twitter:description content="Step-by-step instructions using the WebUI"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://blog.kmil.us/posts/"},{"@type":"ListItem","position":3,"name":"Configure Site-to-Site VPN between FortiGate and Meraki","item":"https://blog.kmil.us/posts/fortigate-meraki-vpn-setup/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Configure Site-to-Site VPN between FortiGate and Meraki","name":"Configure Site-to-Site VPN between FortiGate and Meraki","description":"Step-by-step instructions using the WebUI","keywords":["Cisco","Fortinet","FortiGate","Meraki","VPN","S2S","site-to-site"],"articleBody":"Table of Contents Network Topology FortiGate Address Objects FortiGate Address Groups FortiGate VPN Tunnel FortiGate VPN Tunnel Network Section FortiGate VPN Tunnel Authentication Section FortiGate VPN Tunnel Phase 1 Proposal Section FortiGate VPN Tunnel New Phase 2 Section FortiGate VPN Tunnel Phase 2 Proposal Section FortiGate Static Routes FortiGate Firewall Rules Meraki Site-to-Site VPN Meraki IPsec Policies This guide will demonstrate how to configure a simple site-to-site IPsec VPN between FortiGate and Cisco Meraki firewalls. Below is my example topology. I will begin by configuring the FortiGate.\n1. Network Topology FortiGate Meraki WAN IP 1.2.3.4 1.2.4.6 LAN Subnet 10.0.1.0/24 172.17.1.0/24 2. FortiGate Address Objects While address objects and groups aren’t strictly necessary, they will help keep things simple and allow the ability to easily add additional subnets to an existing tunnel.\nLogin to the ForiGate WebUI and navigate to Policy \u0026 Objects and then to Addresses. Here we are going to create an Address object for our local and remote subnets.\nCreate an address object for the local LAN subnet (10.0.1.0/24) and remote LAN subnet (172.17.1.0/24) and give them both a meaningful name.\n3. FortiGate Address Groups Still on the Policy \u0026 Objects \u003e Addresses page create Address Group objects containing the Address objects created in the first step. This will make it easier down the road to add subnets to your existing tunnels as networks change or expand as these objects can be used in tunnel and firewall rule definitions.\n4. FortiGate VPN Tunnel Now for the fun part. On the FortiGate UI head over to VPN \u003e IPsec Tunnels and click on Create New then select IPsec Tunnel. On the VPN Creation Wizard Screen give your tunnel a meaningful name and select Custom for Template type and then choose Next to get started.\nLet’s start filling out the Network section of the New VPN Tunnel page. I am going to simply list all the items changed from the defaults that the wizard provided.\n4.1 FortiGate Network Section Below are the items modified in the Network section of the New VPN Tunnel page.\nProperty Value IP Address 1.2.4.6 Interface WAN NAT Traversal Disable Device creation Enabled 4.2 FortiGate Authentication Section Below are the items modified in the Authentication section of the New VPN Tunnel page.\nProperty Value Authentication Pre-Shared Key make up a super-secret password and remember it for step 7 4.3 FortiGate Phase 1 Proposal Section Below are the items modified in the Phase 1 Proposal section of the New VPN Tunnel page.\nRemove all items that aren’t AES256/SHA256 and use the values below.\nProperty Value Encryption AES256 Authentication SHA256 Diffie-Hellman Group 14 Key Lifetime (seconds) 28800 4.4 FortiGate New Phase 2 Section Below are the items modified in the New Phase 2 section of the New VPN Tunnel page.\nProperty Value Value Local Address Named Address S2S-VPN_Local-Subnets (created in step 2) Remote Address Named Address S2S-VPN_Remote-Subnets (created in step 2) 4.5 FortiGate Phase 2 Proposal Section Below are the items modified in the Phase 2 Proposal section of the New VPN Tunnel page.\nRemove all items that aren’t AES256/SHA256 and use the values below.\nProperty Value Encryption AES256 Authentication SHA256 Enable Perfect Forward Secrecy (PFS) Disabled Key Lifetime Seconds 28800 After everything has been configured the New VPN Tunnel page should look like the image displayed at the beginning of step 4. Click OK to finish this step.\n5. FortiGate Static Routes If you’ve stuck along this far and are wondering why your tunnel hasn’t established yet that is because the FortiGate requires static routes and firewall rules be setup.\nHead over to Network and Static Routes and click Create New. For the first static route enter the LAN subnet of the remote host under Destination. Choose the interface named after the VPN tunnel setup in step three and click OK.\nWe will also want to setup a blackhole route for the remote subnet. Click Create New again, enter the LAN subnet of the remote host for Destination. This time choose Blackhole as the interface and click OK.\n6. FortiGate Firewall Rules We’re going to need to create a couple firewall rules to allow traffic to flow between the VPN and our local network. Let’s take a journey over to the Policy \u0026 Objects and finally to Firewall Policy.\nFirst, we will create the rule that allows local traffic from the FortiGate LAN to the Meraki LAN. Click Create New and give the new rule a meaningful name. Below are a list of values for the first rule, leave the rest at default.\nProperty Value Incoming Interface LAN Outgoing Interface S2S-VPN Source S2S-VPN_Local-Subnets Destination S2S-VPN_Remote-Subnets Service All NAT Disabled Next create a rule that allows the remote Meraki LAN to pass to the local FortiGate LAN. Click Create New and give the new rule a meaningful name. Below is a list of values for the second rule, leave the rest at default.\nProperty Value Incoming Interface S2S-VPN Outgoing Interface lan Source S2S-VPN_Remote-Subnets Destination S2S-VPN_Local-Subnets Service All NAT Disabled 7. Meraki Site-to-Site VPN update the screenshot for this section\nWith all the work done on the FortiGate head over to the Meraki Dashboard and find Site-to-site VPN under Security \u0026 SD-WAN.\nOn the Site-to-site VPN page scroll down and find Non-Meraki VPN peers under Organization-wide settings and click Add a peer/\nBelow are the items modified in the New Phase 2 section of the New VPN Tunnel page.\nProperty Value Name S2S-VPN IKE Version IKEv1 Public IP 1.2.3.4 Private subnets 10.0.1.0/24 Preshared secret Use the same value as the pre shared key in section 4.2 Click on Save Changes at the bottom of the screen.\n8. Meraki IPsec Policies On the newly created Non-Meraki VPN peer click on default under IPsec policies.\nProperty Value Preset Custom Phase 1 Encryption AES 256 Phase 1 Authentication SHA256 Phase 1 Diffie-Hellman group 14 Phase 1 Lifetime 28800 Phase 2 Encryption AES 256 Phase 2 Authentication SHA256 Phase 2 PFS group Off Phase 2 Lifetime 28800 When finished click update and then save changes.\nMeraki takes a little time for the local device to update, do a continuous ping across the VPN tunnel, go grab a coffee, and when you get back you should see the tunnel is up and pings are going through.\n","wordCount":"1042","inLanguage":"en","datePublished":"2022-08-10T20:23:44-05:00","dateModified":"2022-08-10T20:23:44-05:00","author":{"@type":"Person","name":"Kirk"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.kmil.us/posts/fortigate-meraki-vpn-setup/"},"publisher":{"@type":"Organization","name":"Kirk Miller","logo":{"@type":"ImageObject","url":"https://blog.kmil.us/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.kmil.us accesskey=h title="Kirk Miller (Alt + H)">Kirk Miller</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://blog.kmil.us/categories/ title=categories><span>categories</span></a></li><li><a href=https://blog.kmil.us/tags/ title=tags><span>tags</span></a></li><li><a href=https://blog.kmil.us/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://blog.kmil.us/contact/ title=contact><span>contact</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.kmil.us>Home</a>&nbsp;»&nbsp;<a href=https://blog.kmil.us/posts/>Posts</a></div><h1 class=post-title>Configure Site-to-Site VPN between FortiGate and Meraki</h1><div class=post-description>Step-by-step instructions using the WebUI</div><div class=post-meta><span title='2022-08-10 20:23:44 -0500 -0500'>August 10, 2022</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;Kirk</div></header><div class=post-content><h2 id=table-of-contents>Table of Contents<a hidden class=anchor aria-hidden=true href=#table-of-contents>#</a></h2><ul><li><a href=#1-network-topology>Network Topology</a></li><li><a href=#2-fortigate-address-objects>FortiGate Address Objects</a></li><li><a href=#3-fortigate-address-groups>FortiGate Address Groups</a></li><li><a href=#4-fortigate-vpn-tunnel>FortiGate VPN Tunnel</a></li><li><a href=#41-fortigate-network-section>FortiGate VPN Tunnel Network Section</a></li><li><a href=#42-fortigate-authentication-section>FortiGate VPN Tunnel Authentication Section</a></li><li><a href=#43-fortigate-phase-1-proposal-section>FortiGate VPN Tunnel Phase 1 Proposal Section</a></li><li><a href=#44-fortigate-new-phase-2-section>FortiGate VPN Tunnel New Phase 2 Section</a></li><li><a href=#45-fortigate-phase-2-proposal-section>FortiGate VPN Tunnel Phase 2 Proposal Section</a></li><li><a href=#5-fortigate-static-routes>FortiGate Static Routes</a></li><li><a href=#6-fortigate-firewall-rules>FortiGate Firewall Rules</a></li><li><a href=#7-meraki-site-to-site-vpn>Meraki Site-to-Site VPN</a></li><li><a href=#8-meraki-ipsec-policies>Meraki IPsec Policies</a></li></ul><p>This guide will demonstrate how to configure a simple site-to-site IPsec VPN between FortiGate and Cisco Meraki firewalls. Below is my example topology. I will begin by configuring the FortiGate.</p><h3 id=1-network-topology>1. Network Topology<a hidden class=anchor aria-hidden=true href=#1-network-topology>#</a></h3><p><a href=FGMS2S_0-Net-Map.png><img loading=lazy src=FGMS2S_0-Net-Map.png alt="VPN Connection Diagram"></a></p><blockquote><table><thead><tr><th></th><th>FortiGate</th><th>Meraki</th></tr></thead><tbody><tr><td>WAN IP</td><td>1.2.3.4</td><td>1.2.4.6</td></tr><tr><td>LAN Subnet</td><td>10.0.1.0/24</td><td>172.17.1.0/24</td></tr></tbody></table></blockquote><h3 id=2-fortigate-address-objects>2. FortiGate Address Objects<a hidden class=anchor aria-hidden=true href=#2-fortigate-address-objects>#</a></h3><p>While address objects and groups aren&rsquo;t strictly necessary, they will help keep things simple and allow the ability to easily add additional subnets to an existing tunnel.</p><p>Login to the ForiGate WebUI and navigate to <strong>Policy & Objects</strong> and then to <strong>Addresses</strong>. Here we are going to create an Address object for our local and remote subnets.</p><p>Create an address object for the local LAN subnet (10.0.1.0/24) and remote LAN subnet (172.17.1.0/24) and give them both a meaningful name.</p><p><a href=FGMS2S_1-Address-Obj.png><img loading=lazy src=FGMS2S_1-Address-Obj.png alt="FortiGate Address Object Page"></a></p><h3 id=3-fortigate-address-groups>3. FortiGate Address Groups<a hidden class=anchor aria-hidden=true href=#3-fortigate-address-groups>#</a></h3><p>Still on the <strong>Policy & Objects > Addresses</strong> page create Address Group objects containing the Address objects created in the first step. This will make it easier down the road to add subnets to your existing tunnels as networks change or expand as these objects can be used in tunnel and firewall rule definitions.</p><p><a href=FGMS2S_2-Address-Group.png><img loading=lazy src=FGMS2S_2-Address-Group.png alt="FortiGate Address Object Page"></a></p><h3 id=4-fortigate-vpn-tunnel>4. FortiGate VPN Tunnel<a hidden class=anchor aria-hidden=true href=#4-fortigate-vpn-tunnel>#</a></h3><p>Now for the fun part. On the FortiGate UI head over to <strong>VPN</strong> > <strong>IPsec Tunnels</strong> and click on <strong>Create New</strong> then select <strong>IPsec Tunnel</strong>. On the <strong>VPN Creation Wizard</strong> Screen give your tunnel a meaningful name and select <strong>Custom</strong> for <strong>Template type</strong> and then choose <strong>Next</strong> to get started.</p><p>Let&rsquo;s start filling out the <strong>Network</strong> section of the <strong>New VPN Tunnel</strong> page. I am going to simply list all the items changed from the defaults that the wizard provided.</p><p><a href=FGMS2S_3-IPSec.png><img loading=lazy src=FGMS2S_3-IPSec.png alt="Fortigate IPsec Tunnel Screenshot"></a></p><h3 id=41-fortigate-network-section>4.1 FortiGate Network Section<a hidden class=anchor aria-hidden=true href=#41-fortigate-network-section>#</a></h3><p>Below are the items modified in the <strong>Network</strong> section of the <strong>New VPN Tunnel</strong> page.</p><blockquote><table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>IP Address</td><td>1.2.4.6</td></tr><tr><td>Interface</td><td>WAN</td></tr><tr><td>NAT Traversal</td><td>Disable</td></tr><tr><td>Device creation</td><td>Enabled</td></tr></tbody></table></blockquote><h3 id=42-fortigate-authentication-section>4.2 FortiGate Authentication Section<a hidden class=anchor aria-hidden=true href=#42-fortigate-authentication-section>#</a></h3><p>Below are the items modified in the <strong>Authentication</strong> section of the <strong>New VPN Tunnel</strong> page.</p><blockquote><table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>Authentication Pre-Shared Key</td><td><strong>make up a super-secret password and remember it for step 7</strong></td></tr></tbody></table></blockquote><h3 id=43-fortigate-phase-1-proposal-section>4.3 FortiGate Phase 1 Proposal Section<a hidden class=anchor aria-hidden=true href=#43-fortigate-phase-1-proposal-section>#</a></h3><p>Below are the items modified in the <strong>Phase 1 Proposal</strong> section of the <strong>New VPN Tunnel</strong> page.</p><p>Remove all items that aren’t AES256/SHA256 and use the values below.</p><blockquote><table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>Encryption</td><td>AES256</td></tr><tr><td>Authentication</td><td>SHA256</td></tr><tr><td>Diffie-Hellman Group</td><td>14</td></tr><tr><td>Key Lifetime (seconds)</td><td>28800</td></tr></tbody></table></blockquote><h3 id=44-fortigate-new-phase-2-section>4.4 FortiGate New Phase 2 Section<a hidden class=anchor aria-hidden=true href=#44-fortigate-new-phase-2-section>#</a></h3><p>Below are the items modified in the <strong>New Phase 2</strong> section of the <strong>New VPN Tunnel</strong> page.</p><blockquote><table><thead><tr><th>Property</th><th>Value</th><th>Value</th></tr></thead><tbody><tr><td>Local Address</td><td>Named Address</td><td>S2S-VPN_Local-Subnets (created in step 2)</td></tr><tr><td>Remote Address</td><td>Named Address</td><td>S2S-VPN_Remote-Subnets (created in step 2)</td></tr></tbody></table></blockquote><h3 id=45-fortigate-phase-2-proposal-section>4.5 FortiGate Phase 2 Proposal Section<a hidden class=anchor aria-hidden=true href=#45-fortigate-phase-2-proposal-section>#</a></h3><p>Below are the items modified in the <strong>Phase 2 Proposal</strong> section of the <strong>New VPN Tunnel</strong> page.</p><p>Remove all items that aren’t AES256/SHA256 and use the values below.</p><blockquote><table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>Encryption</td><td>AES256</td></tr><tr><td>Authentication</td><td>SHA256</td></tr><tr><td>Enable Perfect Forward Secrecy (PFS)</td><td>Disabled</td></tr><tr><td>Key Lifetime Seconds</td><td>28800</td></tr></tbody></table></blockquote><p>After everything has been configured the <strong>New VPN Tunnel</strong> page should look like the image displayed at the beginning of step 4. Click <strong>OK</strong> to finish this step.</p><h3 id=5-fortigate-static-routes>5. FortiGate Static Routes<a hidden class=anchor aria-hidden=true href=#5-fortigate-static-routes>#</a></h3><p>If you&rsquo;ve stuck along this far and are wondering why your tunnel hasn&rsquo;t established yet that is because the FortiGate requires static routes and firewall rules be setup.</p><p>Head over to <strong>Network</strong> and <strong>Static Routes</strong> and click <strong>Create New</strong>. For the first static route enter the LAN subnet of the remote host under <strong>Destination</strong>. Choose the interface named after the VPN tunnel setup in step three and click <strong>OK</strong>.</p><p>We will also want to setup a blackhole route for the remote subnet. Click <strong>Create New</strong> again, enter the LAN subnet of the remote host for <strong>Destination</strong>. This time choose <strong>Blackhole</strong> as the interface and click <strong>OK</strong>.</p><p><a href=FGMS2S_4-Static-Routes.png><img loading=lazy src=FGMS2S_4-Static-Routes.png alt="Fortigate IPsec Tunnel Screenshot"></a></p><h3 id=6-fortigate-firewall-rules>6. FortiGate Firewall Rules<a hidden class=anchor aria-hidden=true href=#6-fortigate-firewall-rules>#</a></h3><p>We&rsquo;re going to need to create a couple firewall rules to allow traffic to flow between the VPN and our local network. Let&rsquo;s take a journey over to the <strong>Policy & Objects</strong> and finally to <strong>Firewall Policy</strong>.</p><p>First, we will create the rule that allows local traffic from the FortiGate LAN to the Meraki LAN. Click <strong>Create New</strong> and give the new rule a meaningful name. Below are a list of values for the first rule, leave the rest at default.</p><blockquote><table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>Incoming Interface</td><td>LAN</td></tr><tr><td>Outgoing Interface</td><td>S2S-VPN</td></tr><tr><td>Source</td><td>S2S-VPN_Local-Subnets</td></tr><tr><td>Destination</td><td>S2S-VPN_Remote-Subnets</td></tr><tr><td>Service</td><td>All</td></tr><tr><td>NAT</td><td>Disabled</td></tr></tbody></table></blockquote><p><a href=FGMS2S_5-Firewall-L2R.png><img loading=lazy src=FGMS2S_5-Firewall-L2R.png alt="Fortigate IPsec Tunnel Screenshot"></a></p><p>Next create a rule that allows the remote Meraki LAN to pass to the local FortiGate LAN. Click <strong>Create New</strong> and give the new rule a meaningful name. Below is a list of values for the second rule, leave the rest at default.</p><blockquote><table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>Incoming Interface</td><td>S2S-VPN</td></tr><tr><td>Outgoing Interface</td><td>lan</td></tr><tr><td>Source</td><td>S2S-VPN_Remote-Subnets</td></tr><tr><td>Destination</td><td>S2S-VPN_Local-Subnets</td></tr><tr><td>Service</td><td>All</td></tr><tr><td>NAT</td><td>Disabled</td></tr></tbody></table></blockquote><p><a href=FGMS2S_6-Firewall_R2L.png><img loading=lazy src=FGMS2S_6-Firewall_R2L.png alt="Fortigate IPsec Tunnel Screenshot"></a></p><h3 id=7-meraki-site-to-site-vpn>7. Meraki Site-to-Site VPN<a hidden class=anchor aria-hidden=true href=#7-meraki-site-to-site-vpn>#</a></h3><p><strong>update the screenshot for this section</strong></p><p><a href=FGMS2S-8-Meraki.png><img loading=lazy src=FGMS2S-8-Meraki.png alt="Fortigate IPsec Tunnel Screenshot"></a></p><p>With all the work done on the FortiGate head over to the <a href=https://dashboard.meraki.com>Meraki Dashboard</a> and find <strong>Site-to-site VPN</strong> under <strong>Security & SD-WAN</strong>.</p><p>On the <strong>Site-to-site VPN</strong> page scroll down and find <strong>Non-Meraki VPN peers</strong> under <strong>Organization-wide settings</strong> and click <strong>Add a peer</strong>/</p><p>Below are the items modified in the <strong>New Phase 2</strong> section of the <strong>New VPN Tunnel</strong> page.</p><blockquote><table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>Name</td><td>S2S-VPN</td></tr><tr><td>IKE Version</td><td>IKEv1</td></tr><tr><td>Public IP</td><td>1.2.3.4</td></tr><tr><td>Private subnets</td><td>10.0.1.0/24</td></tr><tr><td>Preshared secret</td><td><strong>Use the same value as the pre shared key in section 4.2</strong></td></tr></tbody></table></blockquote><p>Click on <strong>Save Changes</strong> at the bottom of the screen.</p><h3 id=8-meraki-ipsec-policies>8. Meraki IPsec Policies<a hidden class=anchor aria-hidden=true href=#8-meraki-ipsec-policies>#</a></h3><p><a href=FGMS2S_9-Meraki-Proposals.png><img loading=lazy src=FGMS2S_9-Meraki-Proposals.png alt="Fortigate IPsec Tunnel Screenshot"></a></p><p>On the newly created Non-Meraki VPN peer click on <strong>default</strong> under <strong>IPsec policies</strong>.</p><blockquote><table><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>Preset</td><td>Custom</td></tr><tr><td>Phase 1 Encryption</td><td>AES 256</td></tr><tr><td>Phase 1 Authentication</td><td>SHA256</td></tr><tr><td>Phase 1 Diffie-Hellman group</td><td>14</td></tr><tr><td>Phase 1 Lifetime</td><td>28800</td></tr><tr><td>Phase 2 Encryption</td><td>AES 256</td></tr><tr><td>Phase 2 Authentication</td><td>SHA256</td></tr><tr><td>Phase 2 PFS group</td><td>Off</td></tr><tr><td>Phase 2 Lifetime</td><td>28800</td></tr></tbody></table></blockquote><p>When finished click <strong>update</strong> and then <strong>save changes</strong>.</p><p>Meraki takes a little time for the local device to update, do a continuous ping across the VPN tunnel, go grab a coffee, and when you get back you should see the tunnel is up and pings are going through.</p><p><a href=FGMS2S_7-VPNStatus.png><img loading=lazy src=FGMS2S_7-VPNStatus.png alt="Fortigate IPsec Tunnel Screenshot"></a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.kmil.us/tags/cisco/>Cisco</a></li><li><a href=https://blog.kmil.us/tags/fortinet/>Fortinet</a></li><li><a href=https://blog.kmil.us/tags/fortigate/>FortiGate</a></li><li><a href=https://blog.kmil.us/tags/meraki/>Meraki</a></li><li><a href=https://blog.kmil.us/tags/vpn/>VPN</a></li><li><a href=https://blog.kmil.us/tags/s2s/>S2S</a></li><li><a href=https://blog.kmil.us/tags/site-to-site/>site-to-site</a></li></ul><nav class=paginav><a class=prev href=https://blog.kmil.us/posts/outlook-2013-modern-auth/><span class=title>« Prev Page</span><br><span>Enable Modern Authentication for Outlook 2013</span></a>
<a class=next href=https://blog.kmil.us/posts/steam-deck-resources/><span class=title>Next Page »</span><br><span>Useful Steam Deck Resources</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Configure Site-to-Site VPN between FortiGate and Meraki on twitter" href="https://twitter.com/intent/tweet/?text=Configure%20Site-to-Site%20VPN%20between%20FortiGate%20and%20Meraki&url=https%3a%2f%2fblog.kmil.us%2fposts%2ffortigate-meraki-vpn-setup%2f&hashtags=Cisco%2cFortinet%2cFortiGate%2cMeraki%2cVPN%2cS2S%2csite-to-site"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Configure Site-to-Site VPN between FortiGate and Meraki on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fblog.kmil.us%2fposts%2ffortigate-meraki-vpn-setup%2f&title=Configure%20Site-to-Site%20VPN%20between%20FortiGate%20and%20Meraki&summary=Configure%20Site-to-Site%20VPN%20between%20FortiGate%20and%20Meraki&source=https%3a%2f%2fblog.kmil.us%2fposts%2ffortigate-meraki-vpn-setup%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Configure Site-to-Site VPN between FortiGate and Meraki on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fblog.kmil.us%2fposts%2ffortigate-meraki-vpn-setup%2f&title=Configure%20Site-to-Site%20VPN%20between%20FortiGate%20and%20Meraki"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Configure Site-to-Site VPN between FortiGate and Meraki on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.kmil.us%2fposts%2ffortigate-meraki-vpn-setup%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Configure Site-to-Site VPN between FortiGate and Meraki on whatsapp" href="https://api.whatsapp.com/send?text=Configure%20Site-to-Site%20VPN%20between%20FortiGate%20and%20Meraki%20-%20https%3a%2f%2fblog.kmil.us%2fposts%2ffortigate-meraki-vpn-setup%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Configure Site-to-Site VPN between FortiGate and Meraki on telegram" href="https://telegram.me/share/url?text=Configure%20Site-to-Site%20VPN%20between%20FortiGate%20and%20Meraki&url=https%3a%2f%2fblog.kmil.us%2fposts%2ffortigate-meraki-vpn-setup%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://blog.kmil.us>Kirk Miller</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>